## 文档进度

### 进度

指南=》小程序运行时

### 未细看

+ 动画 https://developers.weixin.qq.com/miniprogram/dev/framework/view/animation.html
+ wxml节点信息 https://developers.weixin.qq.com/miniprogram/dev/framework/view/selector.html

## 问题

## navigator 是块级元素？

确实是块级元素，和 html 的 a 标签不一样。

### 原生 css 可以使用变量 ？

需要学习 less 语法 csss 使用变量。

less 中使用 calc 如果需要原样输出 需要这样  ~'calc()'

### 箭头函数

在小程序中使用箭头函数，会丢失 this 。不像在 其他 js 环境中，箭头函数的 this 指向定义时的上下文。

### 函数参数问题

函数参数只能通过属性进行传递吗？可以使用箭头函数的形式进行参数传递吗

不可以，试过了，只能是一个方法名，不能写箭头函数，再在箭头函数中调用实际的函数。

只能用属性的方法进行参数获取。

### 父传子的函数的两种方式

+ bind事件名

  0、在父组件中写一个函数，作为事件触发执行的函数

  ```javascript
  changeName:function(e){ //事件对象 e 会包含子组件触发事件时传过来的参数。
      console.log(e.detail);
      this.setData({name:e.detail.name});
    }
  ```

  1、父组件给子组件传递一个自定义事件，把事件传进去

  ```html
  /* data-属性名 代表添加自定义属性  bind事件名代表 添加自定义事件 */
  <menu name="{{name}}" bindChangeName="changeName"></menu>
  ```

  2、子组件触发这个自定义事件

  子组件通过一个真实的触摸事件，去触发父组件传递的自定义事件

  ```html
  <text bindtap="mychangeName">这是菜单组件:{{name}}</text>
  ```

  触摸事件里面去触发自定义事件

  ```javascript
  mychangeName:function(){
      //第一个参数是要触发的事件，后面一个参数是一个对象，可以把要传给父组件的数据写在这里。
      this.triggerEvent("ChangeName",{name:"xiamin"})
      }
  ```

  

+ 和传递数据一样的方式传递函数

  不可以！都不知道怎么获取到页面的方法。怎么传，除非把方法放在 data 中。但是这种方法也不能传递 this。因为不能使用箭头函数定义函数。所以 this 会指向组件，不能达到向父组件传递数据的功能。

### 插槽

插槽应该有自己的名字，一个组件才能有多个插槽。

##  全局配置 tabBar

tabBar就是标签卡，用来跳转页面。默认在底部；

```json
"tabBar": {
    "list": [{
      "pagePath": "页面地址",
      "text": "text",
      "iconPath": "未选中时候显示的图标地址",
      "selectedIconPath": "选中时显示图标的地址"
    }]
  }
//list 配置底下标签的个数 最少两个 最多五个，只有在 list数组中的页面，才会显示配置好的 tabBar
"tabBar": {
    "list": [{
      "pagePath": "pages/pg1/pg1",
      "text": "第一个",
      "iconPath": "ico/angular.png",
      "selectedIconPath": "ico/arm.png"
    },{
      "pagePath": "pages/pg2/pg2",
      "text": "第2个",
      "iconPath": "ico/eclipse.png",
      "selectedIconPath": "ico/eclipseide.png"
    }]
    //还有其他tabBar的配置，查看文档
```

| 属性            | 类型     | 必填 | 默认值 | 描述                                                         | 最低版本                                                     |
| --------------- | -------- | ---- | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| color           | HexColor | 是   |        | tab 上的文字默认颜色，仅支持十六进制颜色                     |                                                              |
| selectedColor   | HexColor | 是   |        | tab 上的文字选中时的颜色，仅支持十六进制颜色                 |                                                              |
| backgroundColor | HexColor | 是   |        | tab 的背景色，仅支持十六进制颜色                             |                                                              |
| borderStyle     | string   | 否   | black  | tabbar 上边框的颜色， 仅支持 `black` / `white`               |                                                              |
| list            | Array    | 是   |        | tab 的列表，详见 `list` 属性说明，最少 2 个、最多 5 个 tab   |                                                              |
| position        | string   | 否   | bottom | tabBar 的位置，仅支持 `bottom` / `top`                       |                                                              |
| custom          | boolean  | 否   | false  | 自定义 tabBar，见[详情](https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html) | [2.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

## 页面配置样式

页面配置可以覆盖 全局样式配置的window属性：是window

```json
{
  "navigationBarBackgroundColor": "#ffffff",
  "navigationBarTextStyle": "black",
  "navigationBarTitleText": "微信接口功能演示",
  "backgroundColor": "#eeeeee",
  "backgroundTextStyle": "light"
}
```

## 页面创建

### page({})

简单页面可以使用  page({}) 进行页面的构造。规定与页面绑定的数据写在data 中。其余属性： 生命周期函数 、普通函数、普通数据直接写在构造器的对象中即可。

```javascript
Page({
  data: {
    text: "This is page data."
  },
 生命周期函数,
 普通函数,
 普通数据，
})
```

### Component({})

复杂的页面建议使用  Component({})  构造器。规定 数据写在 data 中。生命周期函数 和 普通函数写在 methods 里。

```javascript
Component({
  data: {
    text: "This is page data."
  },
  methods: {
    onLoad: function(options) {
      // 页面创建时执行
    },
    onPullDownRefresh: function() {
      // 下拉刷新时执行
    },
    // 事件响应函数
    viewTap: function() {
      // ...
    }
  }
})
```

## 数据绑定

小程序中每个页面就是一个文件夹，我们需要在文件夹中的 js 文件中使用 **Page({})** 进行页面的注册。每个页面都是一个模块，有自己的作用域，即所谓的数据不共享。

### 绑定页面的数据

注册函数 Page( ) 参数是一个对象。对象中的属性 **data:{}**  就是可以绑定在页面中的数据。

```javascript
Page({
  /**
   * 页面的初始数据
   */
  data: {
	name:"sisi"
  }
})
```

### 页面中使用绑定数据

在页面中使用插值表达式就可以使用绑定的数据； 属性和文本中使用数据都需要使用插值表达式。插值表达式可以写一个**数组**，页面会进行解构；

注意：**插值表达式前面不要有空格,否则会识别不出**

```html
<text name="{{name}}">{{name}}</text>
```

### 插值表达式的运算

{{}} 就是插值表达式，在小程序中**插值表达式前面不要有空格,否则会识别不出**

在插值表达式中我们可以：

1. 数字的加减
2. 字符串拼接
3. 三元表达式

**复杂的代码语句不能被运行**

### 改变已绑定的数据

在 page() 内部，可以通过函数来改变 data:{}中的数据。和其他框架不同，不能直接赋值进行数据的更改。需要通过函数: ****

```javascript
changdata:function(e){
this.setData({
  name:"xiamin"
});
},
```

## 条件渲染

使用 控制属性 **wx-if , wx-elif ,wx-else 或者  hidden**控制某个元素是否被渲染

wx-if: 适用于标签不是被频繁切换的时候，因为这种方式会把元素从界面中移除。

hidden： 适用于频繁切换标签的 显示与 隐藏，这种方式只是改变标签的样式为隐藏。hidden 不要和 display 属性一起使用，其中一个会被覆盖。

```html
<text wx:if="{{res}}">wozai</text>
<text hidden="{{res}}">wozai</text>


//if  elif  else  连着一起用？怎么判断是不是同一组判断
<text wx:if="{{false}}">wozai</text>  
<text wx:elif="{{false}}">wozai</text>
<text wx:else>wozai</text>  //前面两个都是 false  最后就显示 else


```

### 双向绑定

令人惊讶的是，微信竟然提供了数据的双向绑定。和其他框架一样，数据的双向绑定只能发生在表单元素中。

使用  model:  进行数据的双向绑定。但是和其他框架的数据绑定比起来，微信的数据绑定有一定的限制。

```vue
/*	正确的使用方法	*/
<input model:value="{{value}}" /> 
/*	不正确的使用方法 只能绑定单一的字段	*/
<input model:value="{{person.value}}" /> 
<input model:value="{'value的值是：'+value}"/> 
```

#### 数据共享

和其他框架一样，即使页面的都有自己的作用域。但是还是会想办法，让各个页面进行数据共享。

微信提供的是 **behaviors**	。虽然看起来只是导入了一个 js 文件导出的对象，使用这个对象中的方法和数据。但是实际上 **behaviors**  的数据、方法会直接合并到页面的数据方法中。可以直接在页面中使用。**behaviors** 有自己的生命周期，在相应时间会自动执行。

#### behaviors 的组成

| properties    | Object Map       | 否     | 同组件的属性              |      |
| ------------- | ---------------- | ------ | ------------------------- | ---- |
| **data**      | **Object**       | **否** | **同组件的数据**          |      |
| **methods**   | **Object**       | **否** | **同自定义组件的方法**    |      |
| **behaviors** | **String Array** | **否** | **引入其它的 `behavior`** |      |
| **created**   | **Function**     | **否** | **生命周期函数**          |      |
| **attached**  | **Function**     | **否** | **生命周期函数**          |      |
| **ready**     | **Function**     | **否** | **生命周期函数**          |      |
| **moved**     | **Function**     | **否** | **生命周期函数**          |      |
| **detached**  | **Function**     | **否** | **生命周期函数**          |      |

#### **behaviors 创建**

```javascript
// my-behavior.js
module.exports = Behavior({
  behaviors: [],
  properties: {
    myBehaviorProperty: {
      type: String
    }
  },
  data: {
    myBehaviorData: {}
  },
  attached: function(){},
  methods: {
    myBehaviorMethod: function(){}
  }
})

```

#### 使用 behaviors

页面 和 组件 都可以引用 behavior 。而且可以引用多个 behavior。

```javascript
var myBehavior = require('./my-behavior.js')
Page({
  behaviors: [myBehavior],
  onLoad: function() {
    this.data.sharedText === 'This is a piece of data shared between pages.'
  }
})
```

#### 同名属性、方法覆盖规则

同名属性和方法会被覆盖：本身  >子behavior > 父behavior > 后面的behavior  > 前面的behavior。

生命周期**不会被覆盖**，分先后顺序进行执行 ：  子behavior > 前面的behavior > 本身

## 列表渲染

使用指令 **wx-for** 进行列表渲染,即循环 数组 或者 对象  进行页面渲染。

1. wx:for="{{数组或者对象}}”wx:for-item="循环项的名称"wx:for-index="循环项的索引名称"
2.  wx:key="唯一的值”用来提高列表渲染的性能
   1. wx:key 绑定一个普通的字符串的时候那么这个字符串名称肯定是循环数组中的对象的唯一属性
   2. wx:key ="\*this”就表示你的数组是一个普通的数组\*this表示是循环项
3. 当出现数组的嵌套循环的时候尤其要注意以下绑定的名称不要重名
   wx :for-item="item" wx :for-index="index"
4. 默认情况下我们不写wx : for-item="item" wx:for-index="index"
   小程序也会把循环项的名称和索引的名称item和 index
   只有一层循环的话(wx:for-item="item"  wx:for-index="index")可以省略

## block标签

这就是梦寐以求的空标签，在渲染列的时候不会出现在界面中。

```wxml
<block></block>
```



## 事件绑定

绑定 js 的事件，只有一个参数 event ,元素的属性、自定义属性，都可以通过 event 对象进行获取。

绑定 ws  事件，会有两个参数，第一个参数也是 event ，第二个参数可以用来修改元素的样式 和 class

具体 ws  语法参考https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxs/

绑定 ws 事件参考https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html

### 事件绑定

事件绑定使用关键字 ：

**bind**   bindEventName="FunctionName"; 也可以加一个 ： bind:EventName="FunctionName";

这种绑定的方式，冒泡事件会冒泡（并不是所有的事件都会冒泡）

**catch**   cathEventName="FunctionName"; 也可以加一个 ： catch:EventName="FunctionName";

这种绑定方式会阻止事件的冒泡。

 **mut-bind**  mut-bindEventName="FunctionName"; 也可以加一个 ： mutbind:EventName="FunctionName";

这种绑定方式叫做 互斥绑定。会冒泡，但是如果父元素的事件也是这种绑定方式，父元素事件并不会被触发。如果是 bind catch 则父元素的事件会被触发。

```html
/*绑定一个触摸结束事件*/
<text bindtouchend="changdata">{{name}}</text>
```

**小程序的事件名和网页端的不太一样**。因为小程序是运行在手机端的程序，没有鼠标操作。

### 方法传参

方法不可以在后面写括号加上参数。只能通过自定义属性进行传参。

#### 自定义属性

在标签内 添加自定义的属性

data-AttributeName

```html
<text bindtouchend="changdata" data-newname="xiamin">{{name}}</text>
```

#### 获取元素的自定义属性

事件绑定在某个标签上，触发该事件时，该标签就是事件源。事件方法 会有一个 参数 e ,可以用来获取有关该标签的信息。如输入框的值、自定义属性的值...

```javascript
changdata:function(e){
this.setData({
  name:e.currentTarget.dataset.newname //获取自定义属性的值
});
},
```

## wxss样式

wxss和css样式差不多。为了适应广大的前端开发者，WXSS 具有 CSS 大部分特性。同时为了更适合开发微信小程序，WXSS 对 CSS 进行了扩充以及修改。 

与 CSS 相比，WXSS 扩展的特性有：

- 尺寸单位
- 样式导入

### 尺寸单位

 rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6  上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素。 

就像是 rem 一样，通俗点来说，rpx的大小等于屏幕大小的 750分之一。

但是设计稿都是以像素为单位，那么里面元素的大小的换算就可以使用计算属性 calc(750rpx * elLength / allLength)

### 样式导入

在 .wxss文件中，使用`@import`语句可以导入外联样式表，`@import`后跟需要导入的外联样式表的相对路径，用`;`表示语句结束。路径只能是相对路径。

全局样式写在 app.wxss 中，所有页面都可以使用这个app.wxss中的样式。第三方 全局样式，也只有需要在 app.wxss 中进行导入就行，比如 第三方字体图标样式。 

### 在 vscode中用 less语法来书写 wxss

1. 安装vsxode插件 easyLess

2. 配置vscode 

   使得可以自动把 less文件编译成 同名的 wxss文件在同一目录下

   ```json
    "less.compile": {
           "outExt": ".wxss"
       }
   ```

3. 编写 less文件，保存即可生成效果一样的 .wxss文件
4. less 文件也支持 @import 导入外联样式表

### 内联样式

框架组件上支持使用 style、class 属性来控制组件的样式。

- style：静态的样式统一写到 class 中。**style 接收动态的样式，在运行时会进行解析，请尽量避免将静态的样式写进 style 中，以免影响渲染速度**。

```html
<view style="color:{{color}};" />
```

- class：用于指定样式规则，其属性值是样式规则中类选择器名(样式类名)的集合，样式类名不需要带上`.`，样式类名之间用空格分隔。

```html
<view class="normal_view" />
```

### 选择器

+ 通配符选择器 *   **不支持**

  如果你想使用选择所有的元素，进行样式的 **初始化**，你可以使用伪类选择器 nth:child(n) 

  ```css
  :nth-child(n){
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-collapse: collapse;
  }
  ```

+ 类选择器

+ id 选择器

+ 标签选择器

+ 后代选择器

+ 子元素选择器

+ 并集选择器

+ 后面兄弟选择器

+ 下一个兄弟选择器

+ 属性选择器

  wxss支持属性选择器，但是需要注意的是，如果是自定义属性，必须写成 data-attributeName  不然这个属性并不会出现在代码结构中。

  ```html
  /*错误写法 代码结构中并不会出现 name 这一属性*/    
  <text class="tx" name="xiamin">sisi</text>
  /*使用属性选择器 自然也就找不到这个属性*/
  .tx[name]{color: brown;}
  
  /*正确写法 代码结构中会出现 data-name 这一属性*/    
  <text class="tx" data-name="xiamin">sisi</text>
  /*使用选择器*/
  .tx[data-name]{color: brown;}
  
  ```

+ 伪类选择器
  + first / last-child   	first / last -of-type
  + nth-child()  	         nth-of-type()
  + only-child
  + not()
  + empty
  + **不支持** focus   checked   disabled  enabled 

## **组件**

wxml 中标签那些是块级元素 哪些是行内元素  哪些是行内块元素？

### 常用块级元素

+ view
+ swiper =》存在默认宽 100%  高 150px。并且无法被盒子撑开宽高，必须自己设置宽 高。
+ navigator  和 html 的 a 标签不一样，navigator  就是一个块级元素。

### 常用行内元素

+ text

### 常用行内块元素

+ image   =>存在默认宽高。使用的时候一般都需要自己设置图片的宽 高

全部组件请参考 官方文档 -》 组件

### view

相当于 div 标签。是视图容器的一种。

### text

相当于 span 标签。**不同的是，里面文本会保留原格式？比如在代码中换行，效果就真的换行了**

**唯一一种可以使文本长按复制的标签**

**可以对空格进行解码**

| 值    | 说明                   | 最低版本 |
| ----- | ---------------------- | -------- |
| &ensp | 中文字符空格一半大小   |          |
| &emsp | 中文字符空格大小       |          |
| &nbsp | 根据字体设置的空格大小 |          |

**text标签只能嵌套text标签和文本**

| 属性        | 类型    | 默认值 | 必填 | 说明                                                | 最低版本                                                     |
| ----------- | ------- | ------ | ---- | --------------------------------------------------- | ------------------------------------------------------------ |
| selectable  | boolean | false  | 否   | 文本是否可选 (已废弃)                               | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| user-select | boolean | false  | 否   | 文本是否可选，该属性会使文本节点显示为 inline-block | [2.12.1](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| space       | string  |        | 否   | 显示连续空格                                        | [1.4.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| decode      | boolean | false  | 否   | 是否解码（即是否识别空格代码）                      | [1.4.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

```css
 decode可以解析的有 &nbsp; &lt; &gt; &amp; &apos; &ensp; &emsp;
```

### image

**image组件默认宽度320px、高度240px** 

#### 属性

| src                    | string      |             | 否   | 图片资源地址                                           | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| ---------------------- | ----------- | ----------- | ---- | ------------------------------------------------------ | ------------------------------------------------------------ |
| mode                   | string      | scaleToFill | 否   | 图片裁剪、缩放的模式                                   | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| webp                   | boolean     | false       | 否   | 默认不解析 webP 格式，只支持网络资源                   | [2.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| lazy-load              | boolean     | false       | 否   | 图片懒加载，在即将进入一定范围（上下三屏）时才开始加载 | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| show-menu-by-longpress | boolean     | false       | 否   | 开启长按图片显示识别小程序码菜单                       | [2.7.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| binderror              | eventhandle |             | 否   | 当错误发生时触发，event.detail = {errMsg}              | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindload               | eventhandle |             | 否   | 当图片载入完毕时触发，event.detail = {height, width}   | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

##### **mode 的合法值**

| 值           | 说明                                                         | 最低版本                                                     |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| scaleToFill  | 缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满 image 元素 |                                                              |
| aspectFit    | 缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。 |                                                              |
| aspectFill   | 缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。 |                                                              |
| widthFix     | 缩放模式，宽度不变，高度自动变化，保持原图宽高比不变         |                                                              |
| heightFix    | 缩放模式，高度不变，宽度自动变化，保持原图宽高比不变         | [2.10.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| top          | 裁剪模式，不缩放图片，只显示图片的顶部区域                   |                                                              |
| bottom       | 裁剪模式，不缩放图片，只显示图片的底部区域                   |                                                              |
| center       | 裁剪模式，不缩放图片，只显示图片的中间区域                   |                                                              |
| left         | 裁剪模式，不缩放图片，只显示图片的左边区域                   |                                                              |
| right        | 裁剪模式，不缩放图片，只显示图片的右边区域                   |                                                              |
| top left     | 裁剪模式，不缩放图片，只显示图片的左上边区域                 |                                                              |
| top right    | 裁剪模式，不缩放图片，只显示图片的右上边区域                 |                                                              |
| bottom left  | 裁剪模式，不缩放图片，只显示图片的左下边区域                 |                                                              |
| bottom right | 裁剪模式，不缩放图片，只显示图片的右下边区域                 |                                                              |

感觉这几个模式也不是很实用。

**不等比缩放，图片完全能显示出来**

 宽度 和 高度都等于 image的宽 高 。图片就会铺满整个 image ,且能够全部显示出来

**固定宽 / 高，另一边自动适应**

配合 overflow：hidden 。可以实现图片等比缩放，铺满整个 image ，但是自适应一边会隐藏部分的效果。

### swiper 轮播

+ 轮播图外层容器swiper。每一个轮播项swiper-item 
+ 轮播项 swiper-item 设置宽高是没有用的。必须设置给 swiper
+ swiper标签存在默认样式 **width 100%  height 150px**
+ image存在默认宽度和高度320* 240
+ **swiper高度无法实现由内容撑开** 。必须固定宽 高
+ 要是想等比例的显示轮播图，必须先找出来原图的宽度和高度等比例给swiper定宽度和高度原图的宽度和高度1125 * 352 px
  swiper宽度/ swiper高度=原图的宽度/原图的高度swiper高度=swiper宽度*原图的高度/原图的宽度height: 100vw * 352 /1125

#### 属性

| 属性                       | 类型        | 默认值            | 必填 | 说明                                                         | 最低版本                                                     |
| -------------------------- | ----------- | ----------------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **indicator-dots**         | boolean     | false             | 否   | 是否显示面板指示点                                           | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **indicator-color**        | color       | rgba(0, 0, 0, .3) | 否   | 指示点颜色                                                   | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **indicator-active-color** | color       | #000000           | 否   | 当前选中的指示点颜色                                         | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **autoplay**               | boolean     | false             | 否   | 是否自动切换                                                 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| current                    | number      | 0                 | 否   | 当前所在滑块的 index                                         | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **interval**               | number      | 5000              | 否   | 自动切换时间间隔                                             | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **duration**               | number      | 500               | 否   | 滑动动画时长                                                 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **circular**               | boolean     | false             | 否   | 是否采用衔接滑动                                             | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **vertical**               | boolean     | false             | 否   | 滑动方向是否为纵向                                           | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| previous-margin            | string      | "0px"             | 否   | 前边距，可用于露出前一项的一小部分，接受 px 和 rpx 值        | [1.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| next-margin                | string      | "0px"             | 否   | 后边距，可用于露出后一项的一小部分，接受 px 和 rpx 值        | [1.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| snap-to-edge               | boolean     | "false"           | 否   | 当 swiper-item 的个数大于等于 2，关闭 circular 并且开启 previous-margin 或 next-margin 的时候，可以指定这个边距是否应用到第一个、最后一个元素 | [2.12.1](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **display-multiple-items** | number      | 1                 | 否   | 同时显示的滑块数量                                           | [1.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| easing-function            | string      | "default"         | 否   | 指定 swiper 切换缓动动画类型                                 | [2.6.5](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| **bindchange**             | eventhandle |                   | 否   | current 改变时会触发 change 事件，event.detail = {current, source} | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindtransition             | eventhandle |                   | 否   | swiper-item 的位置发生改变时会触发 transition 事件，event.detail = {dx: dx, dy: dy} | [2.4.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindanimationfinish        | eventhandle |                   | 否   | 动画结束时会触发 animationfinish 事件，event.detail 同上     | [1.9.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

**easing-function 的合法值**

| 值             | 说明         | 最低版本 |
| -------------- | ------------ | -------- |
| default        | 默认缓动函数 |          |
| linear         | 线性动画     |          |
| easeInCubic    | 缓入动画     |          |
| easeOutCubic   | 缓出动画     |          |
| easeInOutCubic | 缓入缓出动画 |          |

`change`事件增加 `source`字段，表示导致变更的原因，可能值如下：

1. `autoplay` 自动播放导致swiper变化；
2. `touch` 用户划动引起swiper变化；
3. 其它原因将用空字符串表示。

### navigator  导航/链接

相当于 a 标签 ，新增了很多属性，很好的体验。

+ 块级元素默认会换行可以直接加宽度和高度1 url要跳转的页面路径绝对路径相对路径

+ target要跳转到当前的小程序还是其他的小程序的页面

  + self默认值自己小程序的页面

  + miniProgram 其他的小程序的页面 open-type跳转的方式

+ navigate 

  + 默认值      ―保留当前页面，跳转到应用内的某个页面，但是不能跳到 tabbar 页面2 

  + redirect    关闭当前页面，跳转到应用内的某个页面，但是不允许跳转到 tabbar 页面。
  + switchTab  跳转到tabBar页面，并关闭其他所有非tabBar页面
  + relanch    关闭所有页面，打开到应用内的某个页面。在小程序插件中使用时，只能在当前插件的页面中调用
  + navigateBack   关闭当前页面，返回上一页面或多级页面。可通过 [getCurrentPages](https://developers.weixin.qq.com/miniprogram/dev/reference/api/getCurrentPages.html) 获取当前的页面栈，决定需要返回几层 
  + exit   退出小程序，`target="miniProgram"`时生效  退出的时别人的小程序？？

| 属性                   | 类型    | 默认值          | 必填 | 说明                                                         | 最低版本                                                     |
| ---------------------- | ------- | --------------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| target                 | string  | self            | 否   | 在哪个目标上发生跳转，默认当前小程序                         | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| url                    | string  |                 | 否   | 当前小程序内的跳转链接                                       | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| open-type              | string  | navigate        | 否   | 跳转方式                                                     | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| delta                  | number  | 1               | 否   | 当 open-type 为 'navigateBack' 时有效，表示回退的层数        | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| app-id                 | string  |                 | 否   | 当`target="miniProgram"`时有效，要打开的小程序 appId         | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| path                   | string  |                 | 否   | 当`target="miniProgram"`时有效，打开的页面路径，如果为空则打开首页 | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| extra-data             | object  |                 | 否   | 当`target="miniProgram"`时有效，需要传递给目标小程序的数据，目标小程序可在 `App.onLaunch()`，`App.onShow()` 中获取到这份数据。[详情](https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/app.html) | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| version                | string  | release         | 否   | 当`target="miniProgram"`时有效，要打开的小程序版本           | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-class            | string  | navigator-hover | 否   | 指定点击时的样式类，当`hover-class="none"`时，没有点击态效果 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-stop-propagation | boolean | false           | 否   | 指定是否阻止本节点的祖先节点出现点击态                       | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-start-time       | number  | 50              | 否   | 按住后多久出现点击态，单位毫秒                               | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-stay-time        | number  | 600             | 否   | 手指松开后点击态保留时间，单位毫秒                           | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindsuccess            | string  |                 | 否   | 当`target="miniProgram"`时有效，跳转小程序成功               | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindfail               | string  |                 | 否   | 当`target="miniProgram"`时有效，跳转小程序失败               | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindcomplete           | string  |                 | 否   | 当`target="miniProgram"`时有效，跳转小程序完成               | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

**target 的合法值**

| 值          | 说明       | 最低版本 |
| ----------- | ---------- | -------- |
| self        | 当前小程序 |          |
| miniProgram | 其它小程序 |          |

**open-type 的合法值**

| 值           | 说明                                                         | 最低版本                                                     |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| navigate     | 对应 [wx.navigateTo](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html) 或 [wx.navigateToMiniProgram](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/miniprogram-navigate/wx.navigateToMiniProgram.html) 的功能 |                                                              |
| redirect     | 对应 [wx.redirectTo](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.redirectTo.html) 的功能 |                                                              |
| switchTab    | 对应 [wx.switchTab](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html) 的功能 |                                                              |
| reLaunch     | 对应 [wx.reLaunch](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.reLaunch.html) 的功能 | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| navigateBack | 对应 [wx.navigateBack](https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html) 的功能 | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| exit         | 退出小程序，`target="miniProgram"`时生效                     | [2.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

**version 的合法值**

| 值      | 说明                                                         | 最低版本 |
| ------- | ------------------------------------------------------------ | -------- |
| develop | 开发版                                                       |          |
| trial   | 体验版                                                       |          |
| release | 正式版，仅在当前小程序为开发版或体验版时此参数有效；如果当前小程序是正式版，则打开的小程序必定是正式版。 |          |

####  使用限制

1. 需要用户确认跳转 从 `2.3.0` 版本开始，在跳转至其他小程序前，将统一增加弹窗，询问是否跳转，用户确认后才可以跳转其他小程序。如果用户点击取消，则回调 `fail cancel`。
2. 每个小程序可跳转的其他小程序数量限制为不超过 10 个 从 2.4.0 版本以及指定日期（具体待定）开始，开发者提交新版小程序代码时，如使用了跳转其他小程序功能，则需要在代码配置中声明将要跳转的小程序名单，限定不超过 10 个，否则将无法通过审核。该名单可在发布新版时更新，不支持动态修改。配置方法详见 [配置](https://developers.weixin.qq.com/miniprogram/dev/framework/config.html)。调用此接口时，所跳转的 appId 必须在配置列表中，否则回调 `fail appId "${appId}" is not in navigateToMiniProgramAppIdList`。

####  关于调试

- 在开发者工具上调用此 API 并不会真实的跳转到另外的小程序，但是开发者工具会校验本次调用跳转是否成功。[详情](https://developers.weixin.qq.com/miniprogram/dev/devtools/different.html#跳转小程序调试支持)
- 开发者工具上支持被跳转的小程序处理接收参数的调试。[详情](https://developers.weixin.qq.com/miniprogram/dev/devtools/different.html#跳转小程序调试支持)

### rich-text 富文本

可以渲染一些 html 代码，但并不是所有的 html 元素。只有受信任的标签才能够正常渲染。具体哪些元素查看官方文档

#### nodes

现支持两种节点，通过type来区分，分别是元素节点和文本节点，默认是元素节点，在富文本区域里显示的HTML节点 元素节点：**type = node**

| 属性     | 说明       | 类型   | 必填 | 备注                                     |
| -------- | ---------- | ------ | ---- | ---------------------------------------- |
| name     | 标签名     | string | 是   | 支持部分受信任的 HTML 节点               |
| attrs    | 属性       | object | 否   | 支持部分受信任的属性，遵循 Pascal 命名法 |
| children | 子节点列表 | array  | 否   | 结构和 nodes 一致                        |

文本节点：**type = text**

| 属性 | 说明 | 类型   | 必填 | 备注         |
| ---- | ---- | ------ | ---- | ------------ |
| text | 文本 | string | 是   | 支持entities |

```js
data: {
      el:`<div><h1>这里是标题</h1><div>另一个div</div></div>`,
      node:[{
        name:"div",
        attr:{style:{color:"red"}},
        children:[{
          type:"text",
          text:"这是 div 的文字"
        },{
          type:"node",
          name:"h1",
          children:[{
            type:"text",
            text:"这是div 》H1的文字"
          }]
        }]
      }]
  },
```

```html
/* 字符串节点 */
<rich-text class="" nodes="{{el}}"></rich-text>  
/* 对象数组节点 */
<rich-text nodes="{{node}}"></rich-text>
```

### button

在小程序中，按钮可以直接触发某些微信的特定事件，其实我猜也可以使用普通按钮绑定某些特定的 API 提供的事件实现这些功能。但是微信小程序把这个事件封装在了按钮的属性中。

#### 属性

| 属性                   | 类型        | 默认值       | 必填 | 说明                                                         | 最低版本                                                     |
| ---------------------- | ----------- | ------------ | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| size                   | string      | default      | 否   | 按钮的大小                                                   | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| type                   | string      | default      | 否   | 按钮的样式类型                                               | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| plain                  | boolean     | false        | 否   | 按钮是否镂空，背景色透明                                     | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| disabled               | boolean     | false        | 否   | 是否禁用                                                     | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| loading                | boolean     | false        | 否   | 名称前是否带 loading 图标                                    | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| form-type              | string      |              | 否   | 用于 [form](https://developers.weixin.qq.com/miniprogram/dev/component/form.html) 组件，点击分别会触发 [form](https://developers.weixin.qq.com/miniprogram/dev/component/form.html) 组件的 submit/reset 事件 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| open-type              | string      |              | 否   | 微信开放能力                                                 | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-class            | string      | button-hover | 否   | 指定按钮按下去的样式类。当 `hover-class="none"` 时，没有点击态效果 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-stop-propagation | boolean     | false        | 否   | 指定是否阻止本节点的祖先节点出现点击态                       | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-start-time       | number      | 20           | 否   | 按住后多久出现点击态，单位毫秒                               | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| hover-stay-time        | number      | 70           | 否   | 手指松开后点击态保留时间，单位毫秒                           | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| lang                   | string      | en           | 否   | 指定返回用户信息的语言，zh_CN 简体中文，zh_TW 繁体中文，en 英文。 | [1.3.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| session-from           | string      |              | 否   | 会话来源，open-type="contact"时有效                          | [1.4.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| send-message-title     | string      | 当前标题     | 否   | 会话内消息卡片标题，open-type="contact"时有效                | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| send-message-path      | string      | 当前分享路径 | 否   | 会话内消息卡片点击跳转小程序路径，open-type="contact"时有效  | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| send-message-img       | string      | 截图         | 否   | 会话内消息卡片图片，open-type="contact"时有效                | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| app-parameter          | string      |              | 否   | 打开 APP 时，向 APP 传递的参数，open-type=launchApp时有效    | [1.9.5](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| show-message-card      | boolean     | false        | 否   | 是否显示会话内消息卡片，设置此参数为 true，用户进入客服会话会在右下角显示"可能要发送的小程序"提示，用户点击后可以快速发送小程序消息，open-type="contact"时有效 | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindgetuserinfo        | eventhandle |              | 否   | 用户点击该按钮时，会返回获取到的用户信息，回调的detail数据与[wx.getUserInfo](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html)返回的一致，open-type="getUserInfo"时有效 | [1.3.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindcontact            | eventhandle |              | 否   | 客服消息回调，open-type="contact"时有效                      | [1.5.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindgetphonenumber     | eventhandle |              | 否   | 获取用户手机号回调，open-type=getPhoneNumber时有效           | [1.2.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| binderror              | eventhandle |              | 否   | 当使用开放能力时，发生错误的回调，open-type=launchApp时有效  | [1.9.5](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindopensetting        | eventhandle |              | 否   | 在打开授权设置页后回调，open-type=openSetting时有效          | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| bindlaunchapp          | eventhandle |              | 否   | 打开 APP 成功的回调，open-type=launchApp时有效               | [2.4.4](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

##### size 的合法值

| 值      | 说明     | 最低版本 |
| ------- | -------- | -------- |
| default | 默认大小 |          |
| mini    | 小尺寸   |          |

##### **type 的合法值**

| 值      | 说明 | 最低版本 |
| ------- | ---- | -------- |
| primary | 绿色 |          |
| default | 白色 |          |
| warn    | 红色 |          |

##### **form-type 的合法值**

| 值     | 说明     | 最低版本 |
| ------ | -------- | -------- |
| submit | 提交表单 |          |
| reset  | 重置表单 |          |

##### **open-type 的合法值**

| 值             | 说明                                                         | 最低版本                                                     |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| contact        | 打开客服会话，如果用户在会话中点击消息卡片后返回小程序，可以从 bindcontact 回调中获得具体信息，[具体说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/customer-message/customer-message.html) | [1.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| share          | 触发用户转发，使用前建议先阅读[使用指引](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/share.html#使用指引) | [1.2.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| getPhoneNumber | 获取用户手机号，可以从bindgetphonenumber回调函数中获取到用户信息，[具体说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/getPhoneNumber.html) | [1.2.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| getUserInfo    | 获取用户信息，可以从bindgetuserinfo回调函数中获取到用户信息  | [1.3.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| launchApp      | 打开APP，可以通过app-parameter属性设定向APP传的参数[具体说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/launchApp.html) | [1.9.5](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| openSetting    | 打开授权设置页                                               | [2.0.7](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| feedback       | 打开“意见反馈”页面，用户可提交反馈内容并上传[日志](https://developers.weixin.qq.com/miniprogram/dev/api/base/debug/wx.getLogManager.html)，开发者可以登录[小程序管理后台](https://mp.weixin.qq.com/)后进入左侧菜单“客服反馈”页面获取到反馈内容 | [2.1.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

##### **lang 的合法值**

| 值    | 说明     | 最低版本 |
| ----- | -------- | -------- |
| en    | 英文     |          |
| zh_CN | 简体中文 |          |
| zh_TW | 繁体中文 |          |

### icon

> 基础库 1.0.0 开始支持，低版本需做[兼容处理](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)。

图标。组件属性的长度单位默认为px，[2.4.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html)起支持传入单位(rpx/px)。

| 属性  | 类型          | 默认值 | 必填 | 说明                                                         | 最低版本                                                     |
| ----- | ------------- | ------ | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| type  | string        |        | 是   | icon的类型，有效值：success, success_no_circle, info, warn, waiting, cancel, download, search, clear | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| size  | number/string | 23     | 否   | icon的大小                                                   | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| color | string        |        | 否   | icon的颜色，同css的color                                     | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

### radio

radio单选框

+ radio标签必须要和父元素radio- group来使用
+ value选中的单选框的值
+ 需要给radio-group绑定change事 件

| 属性     | 类型    | 默认值  | 必填 | 说明                                                         | 最低版本                                                     |
| -------- | ------- | ------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| value    | string  |         | 否   | [radio](https://developers.weixin.qq.com/miniprogram/dev/component/radio.html) 标识。当该[radio](https://developers.weixin.qq.com/miniprogram/dev/component/radio.html) 选中时，[radio-group](https://developers.weixin.qq.com/miniprogram/dev/component/radio-group.html) 的 change 事件会携带[radio](https://developers.weixin.qq.com/miniprogram/dev/component/radio.html)的value | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| checked  | boolean | false   | 否   | 当前是否选中                                                 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| disabled | boolean | false   | 否   | 是否禁用                                                     | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| color    | string  | #09BB07 | 否   | radio的颜色，同css的color                                    | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

### checkbox

+ checkbox必须和 checkbox-group  一起使用。
+ value 选中的复选框的值
+ 需要给 checkbox-group 绑定change  事件，监听复选框按钮改变的

| 属性     | 类型    | 默认值  | 必填 | 说明                                                         | 最低版本                                                     |
| -------- | ------- | ------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| value    | string  |         | 否   | [checkbox](https://developers.weixin.qq.com/miniprogram/dev/component/checkbox.html)标识，选中时触发[checkbox-group](https://developers.weixin.qq.com/miniprogram/dev/component/checkbox-group.html)的 change 事件，并携带 [checkbox](https://developers.weixin.qq.com/miniprogram/dev/component/checkbox.html) 的 value | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| disabled | boolean | false   | 否   | 是否禁用                                                     | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| checked  | boolean | false   | 否   | 当前是否选中，可用来设置默认选中                             | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| color    | string  | #09BB07 | 否   | checkbox的颜色，同css的color                                 | [1.0.0](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

### 自定义组件

组件就是一段可复用的具有样式、逻辑的 wxml代码。和普通页面一样有四个文件组成。

#### 创建组件

在合适的文件夹中  右键 -》 新建组件 。即生成 四个文件夹

##### 声明组件

如果某个页面需要使用组件，需要在该页面的 json  文件中的usingComponents，进行组件的声明。自己定义组件的名字，组件的路径使用相对路径。

```json
{
  "usingComponents": {
    "menu":"../../compoents/menu"
  }
}
```

##### 使用组件

只要在页面的 json 文件中声明了该组件 ，直接使用该组件的名字即可。

```html
<menu> </menu>
```

##### 组件的数据、方法

组件的数据还是和普通的页面一样写在 js 文件的 data  中。但是组件的方法需要写在 js 文件的 methods 中。

##### 父子组件传数据

###### 父传子

+ 和其他框架一样，父组件通过给 子组件 写自定义属性的方式向子组件传递数据。

+ 不同的是。子组件需要手动对数据进行接收，在子组件的 js 文件中有一个属性叫做 properties。

  properties 里面写上需要接收属性的名称。以及这个属性的类型和默认值。接收完后，就会出现在 data 的数据中。

```javas
properties: {
    myname:{
      type:String,
      value:"xiamin"
    }
  }
```

父组件传给子组件的数据，在 properties 中被接收后，就相当于子组件data的数据，可以使用 setdata(),进行修改，但是不建议进行修改自己的数据，应该修改父组件的数据，因为这是父组件传过来的数据，如果需要修改，让父组件再传一个回调函数过来进行修改。

###### 子传父

很明显，通过回调函数可以进行传递数据的传递。

+ bind事件名

  0、在父组件中写一个函数，作为事件触发执行的函数

  ```javascript
  changeName:function(e){ //事件对象 e 会包含子组件触发事件时传过来的参数。
      console.log(e.detail);
      this.setData({name:e.detail.name});
    }
  ```

  1、父组件给子组件传递一个自定义事件，把事件传进去

  ```html
  /* data-属性名 代表添加自定义属性  bind事件名代表 添加自定义事件 */
  <menu name="{{name}}" bindChangeName="changeName"></menu>
  ```

  2、子组件触发这个自定义事件

  子组件通过一个真实的触摸事件，去触发父组件传递的自定义事件

  ```html
  <text bindtap="mychangeName">这是菜单组件:{{name}}</text>
  ```

  触摸事件里面去触发自定义事件

  ```javascript
  mychangeName:function(){
      //第一个参数是要触发的事件，后面一个参数是一个对象，可以把要传给父组件的数据写在这里。
      this.triggerEvent("ChangeName",{name:"xiamin"})
      }
  ```

  

+ 和传递数据一样的方式传递函数

  不可以！都不知道怎么获取到页面的方法。怎么传，除非把方法放在 data 中。但是这种方法也不能传递 this。因为不能使用箭头函数定义函数。所以 this 会指向组件，不能达到向父组件传递数据的功能。

#### 插槽

和其他框架一样，组件都有插槽的。用来作为占位符，以便组件能更好的复用。

父组件传一个元素对插槽进行填充，不像其他框架需要一个根元素，这里可以不用。

```html
<menu name="{{name}}" bindChangeName="changeName">
 <text>1</text>
 <text>2</text>
 <text>3</text>
</menu>
```

组件使用插槽进行占位

```html
<slot> </slot>
```

默认情况下一个组件只能用一个插槽。如果想要使用多个插槽需要进行声明。

```javascript
Component({
  options: {
    multipleSlots: true // 在组件定义时的选项中启用多slot支持
  },
  properties: { /* ... */ },
  methods: { /* ... */ }
})
```

父组件传过来的元素需要一个 solt 属性，用于组件的插槽区分到底是是哪个元素进行填充。

```html
<menu name="{{name}}" bindChangeName="changeName">
 <text solt="s1">1</text>
 <text solt="s2">2</text>
 <text solt="s3">3</text>
</menu>
```

子组件通过 name 属性指定填充插槽的元素是是哪一个

```html
<slot name="s1"> </slot>
<slot name="s2"> </slot>
<slot name="s3"> </slot>
```



## 小程序的生命周期

对于小程序而言，生命周期都在 APP.js 中。

### onLunch()

小程序第一次启动的时候触发的生命周期，此时可以获取用户的信息，进行一些数据存储。只会触发一次。

### onShow()

用户看到小程序的界面，不止触发一次。只要是用户从其他地方重新切回小程序的界面就会被触发。此时可以对数据进行重置，开启定时器之类。

### onHide()

小程序被隐藏的时候被触发。不止触发一次，只要是用户把小程序页面覆盖了就会触发这个事件。此时可以用于清除定时器之类的操作。

### onError(err)

当小程序发生错误的时候触发。可以获取到发生错误的信息，收集到错误信息，发送给后台，下次更新方便进行修复。

### onPageNotFound()

第一次启动小程序时，找不到小程序入口页面（首页）时触发。此时可以通过 js 方式跳转到备选页面。

```javascript
wx.wx.navigateTo({
      url: '',
      success: (result) => {
        
      },
      fail: () => {},
      complete: () => {}
    });
```

## 页面的生命周期

### onLoad(options)

页面加载成功时触发的函数。一般在这里做异步请求，初始化数据。

#### 参数options

这个生命周期函数的参数，是页面跳转过来时  url 后面带的参数。

### onShow()

页面被显示的时候触发。不止一次触发。

### onReady()

页面**第一次**被渲染时触发的函数。

### onHide()

页面被隐藏时候被触发。

### onUnload()

页面被卸载时触发的函数，和隐藏不同的是，隐藏的页面还在栈里面，还可以通过返回重新进入，卸载的页面则只能重新跳转进去。

### onPullDownRefresh()

监听用户的下拉操作，可以通过这个事件重新获取数据进行页面的数据变化渲染。

### onReachBottom()

用户滑动触底事件，就很棒。就是滚动条到底部这个事件，不需要我自己去定义这样的事件了。这个事件的监听可以重新获取数据以更新界面。

### onShareAppMessage()

用户分享页面时触发

### onPageScroll()

当页面进行滚动操作时触发的操作。

### onResize()

当页面大小发生改变时发生的事件。（分屏 、横屏、竖屏的变化就会触发）

设置页面可以自动横屏竖屏

在页面的 json 中进行配置,如果需要全部页面都设置，就写在 App.json 配置文件中

```json
{
    "pageOrientation":"auto"
}

```

### onTabItemTap()

如果当前的页面是 tab 页，并且再点击自己的 tab 就会触发。

## 组件的生命周期函数

| created  | 无             | 在组件实例刚刚被创建时执行               | [1.6.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| -------- | -------------- | ---------------------------------------- | ------------------------------------------------------------ |
| attached | 无             | 在组件实例进入页面节点树时执行           | [1.6.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| ready    | 无             | 在组件在视图层布局完成后执行             | [1.6.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| moved    | 无             | 在组件实例被移动到节点树另一个位置时执行 | [1.6.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| detached | 无             | 在组件实例被从页面节点树移除时执行       | [1.6.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |
| error    | `Object Error` | 每当组件方法抛出错误时执行               | [2.4.1](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) |

### 定义组件的生命周期函数

生命周期方法可以直接定义在 `Component` 构造器的第一级参数中。

自小程序基础库版本 [2.2.3](https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html) 起，组件的的生命周期也可以在 `lifetimes` 字段内进行声明（这是推荐的方式，其优先级最高）。

```javascript
Component({
  lifetimes: {
    attached: function() {
      // 在组件实例进入页面节点树时执行
    },
    detached: function() {
      // 在组件实例被从页面节点树移除时执行
    },
  },
    
    
  // 以下是旧式的定义方式，可以保持对 <2.2.3 版本基础库的兼容
  attached: function() {
    // 在组件实例进入页面节点树时执行
  },
  detached: function() {
    // 在组件实例被从页面节点树移除时执行
  },
  // ...
})

```

## API

微信小程序提供了很丰富的 API 接口，包括 系统、界面、路由、网络 、地图、支付、媒体。。。

详细的请看 微信开放文档-API

### 网络请求

微信提供的封装好的 Ajax 请求。

```javascript
var reqTask = wx.request({
      url: '',
      data: {},
      header: {'content-type':'application/json'},
      method: 'GET',
      dataType: 'json',
      responseType: 'text',
      success: (result)=>{
        
      },
      fail: ()=>{},
      complete: ()=>{}
    });
```

注意： 

需要把 请求地址的域名放入小程序后台白名单当中， 微信公众平台 =》 开发 =》开发设置 =》服务器域名

或者设置不校验合法域名，但是正式上线的啥时候必须设置。

### 本地存储

 web中的本地存储和小程序中的本地存储的区别

1. 写代码的方式不一样了
   + web: localstorage.setItem("key" , "value") localstorage.getItem("key")
   + 小程序中: wx.setStorageSync("key" , "value" ); wx.getStorageSync("key");

2. 存的时候有没有做类型转换
   + web:不管存入的是什么类型的数据，最终都会先调用以下 toString(),把数据变成了字符串再存入进去
   + 小程序:不存在类型转换的这个操作存什么类似的数据进去，获取的时候就是什么类型

#### 使用步骤

1. 先判断一下本地存储中有没有旧的数据
2. 没有旧数据直接发送新请求
3. 有旧的数据同时旧的数据也没有过期就使用本地存储中的旧数据即可
4. 存数据时，不仅要把自己的数据存进去，还应该有一个存数据的时间 { time:Date.now( )  ,data:[...] }，才能进行判断数据过期没有。

### 获取场景值

只能在 App 的生命周期函数中进行获取，场景中会在含函数的参数中。字段 scene。

## 开发步骤

接口文档：https://www.showdoc.com.cn/128719739414963?page_id=2612486239891213

1. 根据需求创建好目录解构

2. 在 app.wxss 中初始化样式

   + 初始化样式

     ```css
     :nth-child(n){
     margin: 0;
     padding: 0;
     box-sizing: border-box;
     }
     ```

   + 初始化字体大小

     ```css
     /* 在page 中初始化字体大小，让子元素进行继承,字体单位应该是 rpx 自适应屏幕大小*/
     page{
         font-size: 30rpx;
     }
     ```

     

3. 可以封装的常用组件

   1. tab 选项卡 。通过传入一个数组，进行列表渲染。达到复用的效果。
   2. 搜索框

4. 可以封装的常用函数
   
   1. ajax 请求 。最好使用 promise 进行封装





## 小程序学习总结

### 小程序 Demo

+ 小程序的本地存储
+ 使用 promise 对 wx.request() 进行封装
+ 

### 小程序可获取的权限



### 小程序提供的 API



### 公众号、服务号、推送的限制

公众号相关=》 jweixin 

